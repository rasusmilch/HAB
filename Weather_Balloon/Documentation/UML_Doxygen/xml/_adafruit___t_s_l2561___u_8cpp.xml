<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="_adafruit___t_s_l2561___u_8cpp" kind="file" language="C++">
    <compoundname>Adafruit_TSL2561_U.cpp</compoundname>
    <includes refid="pgmspace_8h" local="yes">pgmspace.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes refid="_adafruit___t_s_l2561___u_8h" local="yes">Adafruit_TSL2561_U.h</includes>
    <incdepgraph>
      <node id="615">
        <label>stdlib.h</label>
      </node>
      <node id="618">
        <label>Adafruit_Sensor.h</label>
        <link refid="_adafruit___sensor_8h"/>
        <childnode refid="617" relation="include">
        </childnode>
      </node>
      <node id="612">
        <label>Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp</label>
        <link refid="Adafruit_TSL2561_U.cpp"/>
        <childnode refid="613" relation="include">
        </childnode>
        <childnode refid="615" relation="include">
        </childnode>
        <childnode refid="616" relation="include">
        </childnode>
      </node>
      <node id="616">
        <label>Adafruit_TSL2561_U.h</label>
        <link refid="_adafruit___t_s_l2561___u_8h"/>
        <childnode refid="617" relation="include">
        </childnode>
        <childnode refid="618" relation="include">
        </childnode>
        <childnode refid="619" relation="include">
        </childnode>
      </node>
      <node id="617">
        <label>WProgram.h</label>
      </node>
      <node id="619">
        <label>Wire.h</label>
      </node>
      <node id="613">
        <label>pgmspace.h</label>
        <link refid="pgmspace_8h"/>
        <childnode refid="614" relation="include">
        </childnode>
      </node>
      <node id="614">
        <label>inttypes.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="_adafruit___t_s_l2561___u_8cpp_1ab0cc29548ca23ea14f903526ebd05015" prot="public" static="no">
        <name>TSL2561_DELAY_INTTIME_13MS</name>
        <initializer>(15)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp" line="32" column="9" bodyfile="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp" bodystart="32" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="_adafruit___t_s_l2561___u_8cpp_1a20f29462998810f47577534f91991eae" prot="public" static="no">
        <name>TSL2561_DELAY_INTTIME_101MS</name>
        <initializer>(120)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp" line="33" column="9" bodyfile="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp" bodystart="33" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="_adafruit___t_s_l2561___u_8cpp_1aa191a630aa6dcfce75f7327680324f93" prot="public" static="no">
        <name>TSL2561_DELAY_INTTIME_402MS</name>
        <initializer>(450)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp" line="34" column="9" bodyfile="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp" bodystart="34" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="21"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(__AVR__)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;avr/pgmspace.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;util/delay.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pgmspace_8h" kindref="compound">pgmspace.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_adafruit___t_s_l2561___u_8h" kindref="compound">Adafruit_TSL2561_U.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="_adafruit___t_s_l2561___u_8cpp_1ab0cc29548ca23ea14f903526ebd05015" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TSL2561_DELAY_INTTIME_13MS<sp/><sp/><sp/><sp/>(15)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33" refid="_adafruit___t_s_l2561___u_8cpp_1a20f29462998810f47577534f91991eae" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TSL2561_DELAY_INTTIME_101MS<sp/><sp/><sp/>(120)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="_adafruit___t_s_l2561___u_8cpp_1aa191a630aa6dcfce75f7327680324f93" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TSL2561_DELAY_INTTIME_402MS<sp/><sp/><sp/>(450)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="comment">/*========================================================================*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PRIVATE<sp/>FUNCTIONS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="comment">/*========================================================================*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="44"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Adafruit_TSL2561_Unified::write8<sp/>(uint8_t<sp/>reg,<sp/>uint32_t<sp/>value)</highlight></codeline>
<codeline lineno="46"><highlight class="normal">{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.beginTransmission(_addr);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#if<sp/>ARDUINO<sp/>&gt;=<sp/>100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.write(reg);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.write(value<sp/>&amp;<sp/>0xFF);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.send(reg);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.send(value<sp/>&amp;<sp/>0xFF);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.endTransmission();</highlight></codeline>
<codeline lineno="56"><highlight class="normal">}</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="62"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal">uint8_t<sp/>Adafruit_TSL2561_Unified::read8(uint8_t<sp/>reg)</highlight></codeline>
<codeline lineno="64"><highlight class="normal">{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.beginTransmission(_addr);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#if<sp/>ARDUINO<sp/>&gt;=<sp/>100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.write(reg);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.send(reg);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.endTransmission();</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.requestFrom(_addr,<sp/>1);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#if<sp/>ARDUINO<sp/>&gt;=<sp/>100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.read();</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.receive();</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal">}</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="85"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal">uint16_t<sp/>Adafruit_TSL2561_Unified::read16(uint8_t<sp/>reg)</highlight></codeline>
<codeline lineno="87"><highlight class="normal">{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>uint16_t<sp/>x;<sp/>uint16_t<sp/>t;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.beginTransmission(_addr);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#if<sp/>ARDUINO<sp/>&gt;=<sp/>100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.write(reg);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.send(reg);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.endTransmission();</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.requestFrom(_addr,<sp/>2);</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#if<sp/>ARDUINO<sp/>&gt;=<sp/>100</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/>t<sp/>=<sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.read();</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/>x<sp/>=<sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.read();</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/>t<sp/>=<sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.receive();</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/>x<sp/>=<sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.receive();</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/>x<sp/>&lt;&lt;=<sp/>8;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/>x<sp/>|=<sp/>t;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>x;</highlight></codeline>
<codeline lineno="109"><highlight class="normal">}</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="115"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Adafruit_TSL2561_Unified::enable(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="117"><highlight class="normal">{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>the<sp/>device<sp/>by<sp/>setting<sp/>the<sp/>control<sp/>bit<sp/>to<sp/>0x03<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/>write8(<ref refid="_adafruit___t_s_l2561___u_8h_1a79b7f57e5b18fa44ecd3f6f0cf46dffc" kindref="member">TSL2561_COMMAND_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a50f71e4c1ac964fa0ffac246629aee40" kindref="member">TSL2561_REGISTER_CONTROL</ref>,<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a1465abbd34c333983420f5644f239fd7" kindref="member">TSL2561_CONTROL_POWERON</ref>);</highlight></codeline>
<codeline lineno="120"><highlight class="normal">}</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="126"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Adafruit_TSL2561_Unified::disable(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="128"><highlight class="normal">{</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Turn<sp/>the<sp/>device<sp/>off<sp/>to<sp/>save<sp/>power<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/>write8(<ref refid="_adafruit___t_s_l2561___u_8h_1a79b7f57e5b18fa44ecd3f6f0cf46dffc" kindref="member">TSL2561_COMMAND_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a50f71e4c1ac964fa0ffac246629aee40" kindref="member">TSL2561_REGISTER_CONTROL</ref>,<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aedfdafae91b044746ef8da6bb89b66ec" kindref="member">TSL2561_CONTROL_POWEROFF</ref>);</highlight></codeline>
<codeline lineno="131"><highlight class="normal">}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="137"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Adafruit_TSL2561_Unified::getData<sp/>(uint16_t<sp/>*broadband,<sp/>uint16_t<sp/>*ir)</highlight></codeline>
<codeline lineno="139"><highlight class="normal">{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>the<sp/>device<sp/>by<sp/>setting<sp/>the<sp/>control<sp/>bit<sp/>to<sp/>0x03<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/>enable();</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>x<sp/>ms<sp/>for<sp/>ADC<sp/>to<sp/>complete<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(_tsl2561IntegrationTime)</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aa2ac9ab3a9e4918833df40bdb2b3b48c3" kindref="member">TSL2561_INTEGRATIONTIME_13MS</ref>:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>delay(<ref refid="_adafruit___t_s_l2561___u_8cpp_1ab0cc29548ca23ea14f903526ebd05015" kindref="member">TSL2561_DELAY_INTTIME_13MS</ref>);<sp/><sp/></highlight><highlight class="comment">//<sp/>KTOWN:<sp/>Was<sp/>14ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aac276f46523dbc7ea4a885cdda0826db7" kindref="member">TSL2561_INTEGRATIONTIME_101MS</ref>:</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>delay(<ref refid="_adafruit___t_s_l2561___u_8cpp_1a20f29462998810f47577534f91991eae" kindref="member">TSL2561_DELAY_INTTIME_101MS</ref>);<sp/></highlight><highlight class="comment">//<sp/>KTOWN:<sp/>Was<sp/>102ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>delay(<ref refid="_adafruit___t_s_l2561___u_8cpp_1aa191a630aa6dcfce75f7327680324f93" kindref="member">TSL2561_DELAY_INTTIME_402MS</ref>);<sp/></highlight><highlight class="comment">//<sp/>KTOWN:<sp/>Was<sp/>403ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reads<sp/>a<sp/>two<sp/>byte<sp/>value<sp/>from<sp/>channel<sp/>0<sp/>(visible<sp/>+<sp/>infrared)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/>*broadband<sp/>=<sp/>read16(<ref refid="_adafruit___t_s_l2561___u_8h_1a79b7f57e5b18fa44ecd3f6f0cf46dffc" kindref="member">TSL2561_COMMAND_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1adb0ddd7f64255780596d7be8e02d7745" kindref="member">TSL2561_WORD_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a05d26b8299db5c62242141d9324b4778" kindref="member">TSL2561_REGISTER_CHAN0_LOW</ref>);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reads<sp/>a<sp/>two<sp/>byte<sp/>value<sp/>from<sp/>channel<sp/>1<sp/>(infrared)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/>*ir<sp/>=<sp/>read16(<ref refid="_adafruit___t_s_l2561___u_8h_1a79b7f57e5b18fa44ecd3f6f0cf46dffc" kindref="member">TSL2561_COMMAND_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1adb0ddd7f64255780596d7be8e02d7745" kindref="member">TSL2561_WORD_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a308ebd12169466773d391219c8f7f399" kindref="member">TSL2561_REGISTER_CHAN1_LOW</ref>);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Turn<sp/>the<sp/>device<sp/>off<sp/>to<sp/>save<sp/>power<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/>disable();</highlight></codeline>
<codeline lineno="165"><highlight class="normal">}</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight><highlight class="comment">/*========================================================================*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CONSTRUCTORS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight><highlight class="comment">/*========================================================================*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="175"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176" refid="class_adafruit___t_s_l2561___unified_1abd81c1ca2c46e4d8b9c3f4460a65aa3f" refkind="member"><highlight class="normal"><ref refid="class_adafruit___t_s_l2561___unified_1abd81c1ca2c46e4d8b9c3f4460a65aa3f" kindref="member">Adafruit_TSL2561_Unified::Adafruit_TSL2561_Unified</ref>(uint8_t<sp/>addr,<sp/>int32_t<sp/>sensorID)<sp/></highlight></codeline>
<codeline lineno="177"><highlight class="normal">{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/>_addr<sp/>=<sp/>addr;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/>_tsl2561Initialised<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/>_tsl2561AutoGain<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/>_tsl2561IntegrationTime<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aa2ac9ab3a9e4918833df40bdb2b3b48c3" kindref="member">TSL2561_INTEGRATIONTIME_13MS</ref>;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/>_tsl2561Gain<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a8051d9eb664d757f67c0c5ce371cd9d0a710ec4a6459d8d6296656db8e7f4fbfe" kindref="member">TSL2561_GAIN_1X</ref>;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/>_tsl2561SensorID<sp/>=<sp/>sensorID;</highlight></codeline>
<codeline lineno="184"><highlight class="normal">}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight><highlight class="comment">/*========================================================================*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PUBLIC<sp/>FUNCTIONS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight><highlight class="comment">/*========================================================================*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="195"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196" refid="class_adafruit___t_s_l2561___unified_1ac2781d263ae73533628d5844ca38b6de" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">boolean</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1ac2781d263ae73533628d5844ca38b6de" kindref="member">Adafruit_TSL2561_Unified::begin</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)<sp/></highlight></codeline>
<codeline lineno="197"><highlight class="normal">{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><ref refid="_weather___balloon_8cpp_1a5924c9408a49897f2752e9c95b091461" kindref="member">Wire</ref>.begin();</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>we&apos;re<sp/>actually<sp/>connected<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/>uint8_t<sp/>x<sp/>=<sp/>read8(<ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a29b3ff1851ca40e5e230e57d576f061f" kindref="member">TSL2561_REGISTER_ID</ref>);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(x<sp/>&amp;<sp/>0x0A))</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/>_tsl2561Initialised<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>default<sp/>integration<sp/>time<sp/>and<sp/>gain<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a594636810e6e26dc025b7f1b7a16024f" kindref="member">setIntegrationTime</ref>(_tsl2561IntegrationTime);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><ref refid="class_adafruit___t_s_l2561___unified_1ad4189a1cb97b07366b5014bec629f29a" kindref="member">setGain</ref>(_tsl2561Gain);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Note:<sp/>by<sp/>default,<sp/>the<sp/>device<sp/>is<sp/>in<sp/>power<sp/>down<sp/>mode<sp/>on<sp/>bootup<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/>disable();</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="216"><highlight class="normal">}</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="223"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224" refid="class_adafruit___t_s_l2561___unified_1a9bb93fc9a1af24175c9838cdfe7b8904" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a9bb93fc9a1af24175c9838cdfe7b8904" kindref="member">Adafruit_TSL2561_Unified::enableAutoRange</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>enable)</highlight></codeline>
<codeline lineno="225"><highlight class="normal">{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/>_tsl2561AutoGain<sp/>=<sp/>enable<sp/>?<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="227"><highlight class="normal">}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="233"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234" refid="class_adafruit___t_s_l2561___unified_1a594636810e6e26dc025b7f1b7a16024f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a594636810e6e26dc025b7f1b7a16024f" kindref="member">Adafruit_TSL2561_Unified::setIntegrationTime</ref>(<ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264a" kindref="member">tsl2561IntegrationTime_t</ref><sp/>time)</highlight></codeline>
<codeline lineno="235"><highlight class="normal">{</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_tsl2561Initialised)<sp/><ref refid="class_adafruit___t_s_l2561___unified_1ac2781d263ae73533628d5844ca38b6de" kindref="member">begin</ref>();</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>the<sp/>device<sp/>by<sp/>setting<sp/>the<sp/>control<sp/>bit<sp/>to<sp/>0x03<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/>enable();</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>the<sp/>timing<sp/>register<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/>write8(<ref refid="_adafruit___t_s_l2561___u_8h_1a79b7f57e5b18fa44ecd3f6f0cf46dffc" kindref="member">TSL2561_COMMAND_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a3924fa14cb39ddcea2a6a40530e6b9de" kindref="member">TSL2561_REGISTER_TIMING</ref>,<sp/>time<sp/>|<sp/>_tsl2561Gain);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>value<sp/>placeholders<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/>_tsl2561IntegrationTime<sp/>=<sp/>time;</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Turn<sp/>the<sp/>device<sp/>off<sp/>to<sp/>save<sp/>power<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/>disable();</highlight></codeline>
<codeline lineno="249"><highlight class="normal">}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="255"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256" refid="class_adafruit___t_s_l2561___unified_1ad4189a1cb97b07366b5014bec629f29a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1ad4189a1cb97b07366b5014bec629f29a" kindref="member">Adafruit_TSL2561_Unified::setGain</ref>(<ref refid="_adafruit___t_s_l2561___u_8h_1a8051d9eb664d757f67c0c5ce371cd9d0" kindref="member">tsl2561Gain_t</ref><sp/>gain)</highlight></codeline>
<codeline lineno="257"><highlight class="normal">{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_tsl2561Initialised)<sp/><ref refid="class_adafruit___t_s_l2561___unified_1ac2781d263ae73533628d5844ca38b6de" kindref="member">begin</ref>();</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>the<sp/>device<sp/>by<sp/>setting<sp/>the<sp/>control<sp/>bit<sp/>to<sp/>0x03<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/>enable();</highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>the<sp/>timing<sp/>register<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/>write8(<ref refid="_adafruit___t_s_l2561___u_8h_1a79b7f57e5b18fa44ecd3f6f0cf46dffc" kindref="member">TSL2561_COMMAND_BIT</ref><sp/>|<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac36f475ca5b446f4fde4c9b90bec77c8a3924fa14cb39ddcea2a6a40530e6b9de" kindref="member">TSL2561_REGISTER_TIMING</ref>,<sp/>_tsl2561IntegrationTime<sp/>|<sp/>gain);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>value<sp/>placeholders<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/>_tsl2561Gain<sp/>=<sp/>gain;</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Turn<sp/>the<sp/>device<sp/>off<sp/>to<sp/>save<sp/>power<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/>disable();</highlight></codeline>
<codeline lineno="271"><highlight class="normal">}</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="278"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279" refid="class_adafruit___t_s_l2561___unified_1a23378e7c4792b8b8c721d5a4def960fb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a23378e7c4792b8b8c721d5a4def960fb" kindref="member">Adafruit_TSL2561_Unified::getLuminosity</ref><sp/>(uint16_t<sp/>*broadband,<sp/>uint16_t<sp/>*ir)</highlight></codeline>
<codeline lineno="280"><highlight class="normal">{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>valid<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_tsl2561Initialised)<sp/><ref refid="class_adafruit___t_s_l2561___unified_1ac2781d263ae73533628d5844ca38b6de" kindref="member">begin</ref>();</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>Auto<sp/>gain<sp/>disabled<sp/>get<sp/>a<sp/>single<sp/>reading<sp/>and<sp/>continue<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!_tsl2561AutoGain)</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>getData<sp/>(broadband,<sp/>ir);</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>data<sp/>until<sp/>we<sp/>find<sp/>a<sp/>valid<sp/>range<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_agcCheck<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>_b,<sp/>_ir;</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>_hi,<sp/>_lo;</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264a" kindref="member">tsl2561IntegrationTime_t</ref><sp/>_it<sp/>=<sp/>_tsl2561IntegrationTime;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>the<sp/>hi/low<sp/>threshold<sp/>for<sp/>the<sp/>current<sp/>integration<sp/>time<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(_it)</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aa2ac9ab3a9e4918833df40bdb2b3b48c3" kindref="member">TSL2561_INTEGRATIONTIME_13MS</ref>:</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_hi<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a2551f7fe21d9ff00a83b8d91ba501849" kindref="member">TSL2561_AGC_THI_13MS</ref>;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_lo<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ad48ae4def3af8a974deb2db6375ec61d" kindref="member">TSL2561_AGC_TLO_13MS</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aac276f46523dbc7ea4a885cdda0826db7" kindref="member">TSL2561_INTEGRATIONTIME_101MS</ref>:</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_hi<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a44597c26c6a0d43c0b6be516bd0b6c76" kindref="member">TSL2561_AGC_THI_101MS</ref>;</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_lo<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a1aa7ae9e3509bdbb6bc6b07d85e7629a" kindref="member">TSL2561_AGC_TLO_101MS</ref>;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_hi<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a4e745b310c6f7bef46e9716f99e5c4ed" kindref="member">TSL2561_AGC_THI_402MS</ref>;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_lo<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a9d697726cbdc140a8b335aab7e940c7c" kindref="member">TSL2561_AGC_TLO_402MS</ref>;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>getData(&amp;_b,<sp/>&amp;_ir);</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Run<sp/>an<sp/>auto-gain<sp/>check<sp/>if<sp/>we<sp/>haven&apos;t<sp/>already<sp/>done<sp/>so<sp/>...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_agcCheck)</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((_b<sp/>&lt;<sp/>_lo)<sp/>&amp;&amp;<sp/>(_tsl2561Gain<sp/>==<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a8051d9eb664d757f67c0c5ce371cd9d0a710ec4a6459d8d6296656db8e7f4fbfe" kindref="member">TSL2561_GAIN_1X</ref>))</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Increase<sp/>the<sp/>gain<sp/>and<sp/>try<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_adafruit___t_s_l2561___unified_1ad4189a1cb97b07366b5014bec629f29a" kindref="member">setGain</ref>(<ref refid="_adafruit___t_s_l2561___u_8h_1a8051d9eb664d757f67c0c5ce371cd9d0a0eb86b759f88be07c2d218e4dc2da13d" kindref="member">TSL2561_GAIN_16X</ref>);</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Drop<sp/>the<sp/>previous<sp/>conversion<sp/>results<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>getData(&amp;_b,<sp/>&amp;_ir);</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>a<sp/>flag<sp/>to<sp/>indicate<sp/>we&apos;ve<sp/>adjusted<sp/>the<sp/>gain<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_agcCheck<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((_b<sp/>&gt;<sp/>_hi)<sp/>&amp;&amp;<sp/>(_tsl2561Gain<sp/>==<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a8051d9eb664d757f67c0c5ce371cd9d0a0eb86b759f88be07c2d218e4dc2da13d" kindref="member">TSL2561_GAIN_16X</ref>))</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Drop<sp/>gain<sp/>to<sp/>1x<sp/>and<sp/>try<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_adafruit___t_s_l2561___unified_1ad4189a1cb97b07366b5014bec629f29a" kindref="member">setGain</ref>(<ref refid="_adafruit___t_s_l2561___u_8h_1a8051d9eb664d757f67c0c5ce371cd9d0a710ec4a6459d8d6296656db8e7f4fbfe" kindref="member">TSL2561_GAIN_1X</ref>);</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Drop<sp/>the<sp/>previous<sp/>conversion<sp/>results<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>getData(&amp;_b,<sp/>&amp;_ir);</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>a<sp/>flag<sp/>to<sp/>indicate<sp/>we&apos;ve<sp/>adjusted<sp/>the<sp/>gain<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_agcCheck<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Nothing<sp/>to<sp/>look<sp/>at<sp/>here,<sp/>keep<sp/>moving<sp/>....</highlight></codeline>
<codeline lineno="343"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Reading<sp/>is<sp/>either<sp/>valid,<sp/>or<sp/>we&apos;re<sp/>already<sp/>at<sp/>the<sp/>chips<sp/>limits<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*broadband<sp/>=<sp/>_b;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*ir<sp/>=<sp/>_ir;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>valid<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we&apos;ve<sp/>already<sp/>adjusted<sp/>the<sp/>gain<sp/>once,<sp/>just<sp/>return<sp/>the<sp/>new<sp/>results.</highlight></codeline>
<codeline lineno="352"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>avoids<sp/>endless<sp/>loops<sp/>where<sp/>a<sp/>value<sp/>is<sp/>at<sp/>one<sp/>extreme<sp/>pre-gain,</highlight></codeline>
<codeline lineno="353"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>the<sp/>the<sp/>other<sp/>extreme<sp/>post-gain<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*broadband<sp/>=<sp/>_b;</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*ir<sp/>=<sp/>_ir;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>valid<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!valid);</highlight></codeline>
<codeline lineno="359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="366"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367" refid="class_adafruit___t_s_l2561___unified_1a5059ebabcbd037d53459ec9f3c6cdc4b" refkind="member"><highlight class="normal">uint32_t<sp/><ref refid="class_adafruit___t_s_l2561___unified_1a5059ebabcbd037d53459ec9f3c6cdc4b" kindref="member">Adafruit_TSL2561_Unified::calculateLux</ref>(uint16_t<sp/>broadband,<sp/>uint16_t<sp/>ir)</highlight></codeline>
<codeline lineno="368"><highlight class="normal">{</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>chScale;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>channel1;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>channel0;<sp/><sp/></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>the<sp/>sensor<sp/>isn&apos;t<sp/>saturated!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/>uint16_t<sp/>clipThreshold;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(_tsl2561IntegrationTime)</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aa2ac9ab3a9e4918833df40bdb2b3b48c3" kindref="member">TSL2561_INTEGRATIONTIME_13MS</ref>:</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clipThreshold<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a516453615503a68e3516d50f57176116" kindref="member">TSL2561_CLIPPING_13MS</ref>;</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aac276f46523dbc7ea4a885cdda0826db7" kindref="member">TSL2561_INTEGRATIONTIME_101MS</ref>:</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clipThreshold<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a0e1783ebedf5c4a3097be54658d3458f" kindref="member">TSL2561_CLIPPING_101MS</ref>;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clipThreshold<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a52ed40f14b2bbfaca4fa2aac9ad674b3" kindref="member">TSL2561_CLIPPING_402MS</ref>;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="387"><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Return<sp/>65536<sp/>lux<sp/>if<sp/>the<sp/>sensor<sp/>is<sp/>saturated<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((broadband<sp/>&gt;<sp/>clipThreshold)<sp/>||<sp/>(ir<sp/>&gt;<sp/>clipThreshold))</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>65536;</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>the<sp/>correct<sp/>scale<sp/>depending<sp/>on<sp/>the<sp/>intergration<sp/>time<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(_tsl2561IntegrationTime)</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aa2ac9ab3a9e4918833df40bdb2b3b48c3" kindref="member">TSL2561_INTEGRATIONTIME_13MS</ref>:</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>chScale<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a3d24db000dcaa1f9dfb2e610c19fdce1" kindref="member">TSL2561_LUX_CHSCALE_TINT0</ref>;</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a541f87fb512c1fd213e23c3a8b23264aac276f46523dbc7ea4a885cdda0826db7" kindref="member">TSL2561_INTEGRATIONTIME_101MS</ref>:</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>chScale<sp/>=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ab0487a56c1c55f0bb7460895df3e840c" kindref="member">TSL2561_LUX_CHSCALE_TINT1</ref>;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">/*<sp/>No<sp/>scaling<sp/>...<sp/>integration<sp/>time<sp/>=<sp/>402ms<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>chScale<sp/>=<sp/>(1<sp/>&lt;&lt;<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aff6d851aed7d3a64a6ef5f7b99c7d916" kindref="member">TSL2561_LUX_CHSCALE</ref>);</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Scale<sp/>for<sp/>gain<sp/>(1x<sp/>or<sp/>16x)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!_tsl2561Gain)<sp/>chScale<sp/>=<sp/>chScale<sp/>&lt;&lt;<sp/>4;</highlight></codeline>
<codeline lineno="410"><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Scale<sp/>the<sp/>channel<sp/>values<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/>channel0<sp/>=<sp/>(broadband<sp/>*<sp/>chScale)<sp/>&gt;&gt;<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aff6d851aed7d3a64a6ef5f7b99c7d916" kindref="member">TSL2561_LUX_CHSCALE</ref>;</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/>channel1<sp/>=<sp/>(ir<sp/>*<sp/>chScale)<sp/>&gt;&gt;<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aff6d851aed7d3a64a6ef5f7b99c7d916" kindref="member">TSL2561_LUX_CHSCALE</ref>;</highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Find<sp/>the<sp/>ratio<sp/>of<sp/>the<sp/>channel<sp/>values<sp/>(Channel1/Channel0)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>ratio1<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(channel0<sp/>!=<sp/>0)<sp/>ratio1<sp/>=<sp/>(channel1<sp/>&lt;&lt;<sp/>(<ref refid="_adafruit___t_s_l2561___u_8h_1a3155eac331a5f5946d097c1bf0cc65b9" kindref="member">TSL2561_LUX_RATIOSCALE</ref>+1))<sp/>/<sp/>channel0;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>round<sp/>the<sp/>ratio<sp/>value<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>ratio<sp/>=<sp/>(ratio1<sp/>+<sp/>1)<sp/>&gt;&gt;<sp/>1;</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>b,<sp/>m;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>TSL2561_PACKAGE_CS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ratio<sp/>&gt;=<sp/>0)<sp/>&amp;&amp;<sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a7c1403a8b01ae12e5ac46420748bc5d0" kindref="member">TSL2561_LUX_K1C</ref>))</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a26a09c2333ae4002f9e5186a51e13c3a" kindref="member">TSL2561_LUX_B1C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a0035c4187dc5a4020502d2e6077b3a6e" kindref="member">TSL2561_LUX_M1C</ref>;}</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a1dd248d7cee70249b02fd3fbc9c2fc83" kindref="member">TSL2561_LUX_K2C</ref>)</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a9142fa498663b86bee6d4fa0e9c8998e" kindref="member">TSL2561_LUX_B2C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a01af6304f4f1e2d1c4506aeda9d9dba8" kindref="member">TSL2561_LUX_M2C</ref>;}</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aa514263b429c3ef8b4a1ffc9ab93a2a2" kindref="member">TSL2561_LUX_K3C</ref>)</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a26ef3863d02561d154b07029fdf38312" kindref="member">TSL2561_LUX_B3C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a8140888d70b84c3f200a0967a2991040" kindref="member">TSL2561_LUX_M3C</ref>;}</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a4025d35f7fcad575668f64a4edb58610" kindref="member">TSL2561_LUX_K4C</ref>)</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1adce53ed293eb2e1c51701e3f9a8731d5" kindref="member">TSL2561_LUX_B4C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1af1bdbd5a2b975a060d541a5f9e385e08" kindref="member">TSL2561_LUX_M4C</ref>;}</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a2c96527dfd325b07fe50a6d1e1343021" kindref="member">TSL2561_LUX_K5C</ref>)</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1af0e25b511cec1ff5df59d556bb319869" kindref="member">TSL2561_LUX_B5C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a429c5a251540979c2d9267c3d4a1f889" kindref="member">TSL2561_LUX_M5C</ref>;}</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aa921ba6b888218e3930313026b4fd235" kindref="member">TSL2561_LUX_K6C</ref>)</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a29e287cd8553519649e9b7e2232d3998" kindref="member">TSL2561_LUX_B6C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1ad4d33cb4ccff0cd9dd240664fce2ddfa" kindref="member">TSL2561_LUX_M6C</ref>;}</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a40355db7ead547c8084f583c06234a64" kindref="member">TSL2561_LUX_K7C</ref>)</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1aa37796e21ef3f12ca9096b5573d85255" kindref="member">TSL2561_LUX_B7C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a379d222dda7323d65c77decde7f49d01" kindref="member">TSL2561_LUX_M7C</ref>;}</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&gt;<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a5eef1a1c3cb41da21ee086d7fc442ff4" kindref="member">TSL2561_LUX_K8C</ref>)</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a4df189c4e466003915866b37c940ce09" kindref="member">TSL2561_LUX_B8C</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a6c2d68f7ca71f6e253449102203c10a0" kindref="member">TSL2561_LUX_M8C</ref>;}</highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ratio<sp/>&gt;=<sp/>0)<sp/>&amp;&amp;<sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1af60c10ff6e676fad517009d63b46fec3" kindref="member">TSL2561_LUX_K1T</ref>))</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a5616f586cc9bef37fe8b8d7deac39945" kindref="member">TSL2561_LUX_B1T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1ab613a4b2b8d312667d3f51d121a6a2c0" kindref="member">TSL2561_LUX_M1T</ref>;}</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a0b3a7f72cd8086ce30c194d4a421aace" kindref="member">TSL2561_LUX_K2T</ref>)</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1ac6e96f5cf30e279a67673dcbdaeb1b30" kindref="member">TSL2561_LUX_B2T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a86ccc9bbd9d4a6108c74ecb0775c141d" kindref="member">TSL2561_LUX_M2T</ref>;}</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1acd083de11e526ae1e0ac26bbbf81cf65" kindref="member">TSL2561_LUX_K3T</ref>)</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a438019626b45bbcdc11fa9d980929ffc" kindref="member">TSL2561_LUX_B3T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1ac25244168d07b7dbc8ec72b580291a04" kindref="member">TSL2561_LUX_M3T</ref>;}</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ae5fd5107304643a7b18d6226e4f6fccb" kindref="member">TSL2561_LUX_K4T</ref>)</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a942a646c02c386b0fa86a8e1e3676e0c" kindref="member">TSL2561_LUX_B4T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a1ec7ad75708aa4f4a7c74fbefeee7664" kindref="member">TSL2561_LUX_M4T</ref>;}</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1aac19bb4ed796e63d7d6b7dffcbfd2e84" kindref="member">TSL2561_LUX_K5T</ref>)</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1ad87efe789095858d8b2a0be80bb3152f" kindref="member">TSL2561_LUX_B5T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a9ad281ceb8ced6e4f1f7194fcc59426b" kindref="member">TSL2561_LUX_M5T</ref>;}</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ad8e97f6722bd5b66236437451dd61d73" kindref="member">TSL2561_LUX_K6T</ref>)</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1a0d3feafd2d09a8970b0a83eeefc8d6bd" kindref="member">TSL2561_LUX_B6T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a24b1fea2c6918d70fc9f145839471fd2" kindref="member">TSL2561_LUX_M6T</ref>;}</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&lt;=<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a8de4ec79d68cb0d2a0a43c8e6d3596b7" kindref="member">TSL2561_LUX_K7T</ref>)</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1ae4c0086763efeac75af8fb8d1bdb4994" kindref="member">TSL2561_LUX_B7T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1aa2c105ab6187ccdc04218f8181d42778" kindref="member">TSL2561_LUX_M7T</ref>;}</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ratio<sp/>&gt;<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1ac80851ebf368258a3caa537201091d22" kindref="member">TSL2561_LUX_K8T</ref>)</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/>{b=<ref refid="_adafruit___t_s_l2561___u_8h_1aae101cbba5a5ab9dfb653000516e78b1" kindref="member">TSL2561_LUX_B8T</ref>;<sp/>m=<ref refid="_adafruit___t_s_l2561___u_8h_1a0e6cacf4765a8592166ae3eabce341ad" kindref="member">TSL2561_LUX_M8T</ref>;}</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>temp;</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/>temp<sp/>=<sp/>((channel0<sp/>*<sp/>b)<sp/>-<sp/>(channel1<sp/>*<sp/>m));</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>not<sp/>allow<sp/>negative<sp/>lux<sp/>value<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(temp<sp/>&lt;<sp/>0)<sp/>temp<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Round<sp/>lsb<sp/>(2^(LUX_SCALE-1))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/>temp<sp/>+=<sp/>(1<sp/>&lt;&lt;<sp/>(<ref refid="_adafruit___t_s_l2561___u_8h_1a6444753786cd6af180a38fa5a10f6829" kindref="member">TSL2561_LUX_LUXSCALE</ref>-1));</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Strip<sp/>off<sp/>fractional<sp/>portion<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/>uint32_t<sp/>lux<sp/>=<sp/>temp<sp/>&gt;&gt;<sp/><ref refid="_adafruit___t_s_l2561___u_8h_1a6444753786cd6af180a38fa5a10f6829" kindref="member">TSL2561_LUX_LUXSCALE</ref>;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Signal<sp/>I2C<sp/>had<sp/>no<sp/>errors<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lux;</highlight></codeline>
<codeline lineno="474"><highlight class="normal">}</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="482"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483" refid="class_adafruit___t_s_l2561___unified_1a6a133ea86b7a7158408519214c4d0aef" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a6a133ea86b7a7158408519214c4d0aef" kindref="member">Adafruit_TSL2561_Unified::getEvent</ref>(<ref refid="structsensors__event__t" kindref="compound">sensors_event_t</ref><sp/>*event)</highlight></codeline>
<codeline lineno="484"><highlight class="normal">{</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/>uint16_t<sp/>broadband,<sp/>ir;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>the<sp/>event<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/>memset(event,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structsensors__event__t" kindref="compound">sensors_event_t</ref>));</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;version<sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structsensors__event__t" kindref="compound">sensors_event_t</ref>);</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;sensor_id<sp/>=<sp/>_tsl2561SensorID;</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;type<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="_adafruit___sensor_8h_1af0bc43b5dae696582a77176e6e4ff643ae19c28b874a4ef6706d44af6f373f743" kindref="member">SENSOR_TYPE_LIGHT</ref>;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;timestamp<sp/>=<sp/>millis();</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Calculate<sp/>the<sp/>actual<sp/>lux<sp/>value<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a23378e7c4792b8b8c721d5a4def960fb" kindref="member">getLuminosity</ref>(&amp;broadband,<sp/>&amp;ir);</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">event</highlight><highlight class="normal">-&gt;light<sp/>=<sp/><ref refid="class_adafruit___t_s_l2561___unified_1a5059ebabcbd037d53459ec9f3c6cdc4b" kindref="member">calculateLux</ref>(broadband,<sp/>ir);</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(event-&gt;light<sp/>==<sp/>65536)<sp/>{</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="504"><highlight class="normal">}</highlight></codeline>
<codeline lineno="505"><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight><highlight class="comment">/**************************************************************************/</highlight></codeline>
<codeline lineno="510"><highlight class="comment">/**************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="511" refid="class_adafruit___t_s_l2561___unified_1a4c8dcb86a371558aba4ddb0a740d9b3c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_adafruit___t_s_l2561___unified_1a4c8dcb86a371558aba4ddb0a740d9b3c" kindref="member">Adafruit_TSL2561_Unified::getSensor</ref>(<ref refid="structsensor__t" kindref="compound">sensor_t</ref><sp/>*sensor)</highlight></codeline>
<codeline lineno="512"><highlight class="normal">{</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>the<sp/>sensor_t<sp/>object<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/>memset(sensor,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structsensor__t" kindref="compound">sensor_t</ref>));</highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Insert<sp/>the<sp/>sensor<sp/>name<sp/>in<sp/>the<sp/>fixed<sp/>length<sp/>char<sp/>array<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/>strncpy<sp/>(sensor-&gt;<ref refid="structsensor__t_1a4383b68d36f9dc4096d83583c3b009bf" kindref="member">name</ref>,<sp/></highlight><highlight class="stringliteral">&quot;TSL2561&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(sensor-&gt;<ref refid="structsensor__t_1a4383b68d36f9dc4096d83583c3b009bf" kindref="member">name</ref>)<sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a4383b68d36f9dc4096d83583c3b009bf" kindref="member">name</ref>[</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(sensor-&gt;<ref refid="structsensor__t_1a4383b68d36f9dc4096d83583c3b009bf" kindref="member">name</ref>)-<sp/>1]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a274f12a47669fbd2b61935706339e1c2" kindref="member">version</ref><sp/><sp/><sp/><sp/><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a224f6201d59873cc1b6e9dd8a1894736" kindref="member">sensor_id</ref><sp/><sp/><sp/>=<sp/>_tsl2561SensorID;</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1ae1d59df64438923d3bd95f2416c32203" kindref="member">type</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="_adafruit___sensor_8h_1af0bc43b5dae696582a77176e6e4ff643ae19c28b874a4ef6706d44af6f373f743" kindref="member">SENSOR_TYPE_LIGHT</ref>;</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a1cd271377ff25ec9ca54886f876c87ec" kindref="member">min_delay</ref><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a1a17359f1080eb169a452656f7dec1ee" kindref="member">max_value</ref><sp/><sp/><sp/>=<sp/>17000.0;<sp/><sp/></highlight><highlight class="comment">/*<sp/>Based<sp/>on<sp/>trial<sp/>and<sp/>error<sp/>...<sp/>confirm!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a4556ed82a0389a7f6af25a6fd0ee1431" kindref="member">min_value</ref><sp/><sp/><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/>sensor-&gt;<ref refid="structsensor__t_1a926aba3216afd50e62c0a6cdbcc7433a" kindref="member">resolution</ref><sp/><sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="526"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="Weather_Balloon/library/Adafruit_TSL2561-master/Adafruit_TSL2561_U.cpp"/>
  </compounddef>
</doxygen>
